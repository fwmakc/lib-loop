Простая работа с циклами.

Библиотка javascript/typescript (ES6) для node.js.

- бесконечный цикл loop с возможностью выхода,
- асинхронная пауза.

# Установка

```
npm install lib-loop
```

или

```
yarn add lib-loop
```

# Начало работы

Можно импортировать методы как с отдельные функции:

```
import { loop, wait } from 'lib-loop';

loop...
wait...
```

или вызывать их как статические методы объекта:

```
import * as loop from 'lib-loop';

loop.loop...
loop.wait...
```

# Список методов

**async loop(callback: () => Promise<boolean>, milliseconds = 0): Promise<void>**

Запускает цикл.

В цикле вызывается функция callback, пока она возвращает true.

Цикл завершится, когда функция callback вернет false.

Вторым необязательным аргументом можно передать задержку между итерациями.

**async wait(milliseconds: number): Promise<void>**

Пауза для асинхронного кода.

# Примеры

# Бесконечный цикл

Предположим, у нас есть асинхронная функция **main**:

```
async function main(): Promise<boolean> {
  if (...) {
    return false;
  }
  return true;
}
```

Запускать эту функцию в цикле можно самым простым способом, даже прямо из тела индексного файла:

```
loop(main);
```

Эквивалентный способ:

```
(async () => loop(main))();
```

Если функция **main** синхронная:

```
function main(): boolean {
  if (...) {
    return false;
  }
  return true;
}
```

Ее нужно запускать внутри асинхронного вызова:

```
loop(async () => main());
```

Теперь допускается запускать внутри синхронный вызов:

```
loop(() => {
  ...
  return true;
});
```

или синхронную функцию:

```
loop(main);
```

Т.к. данный цикл асинхронный, то несколько циклов подряд будут запускаться параллельно.

Если вы хотите запускать их последовательно, вам нужно вызывать их через **await**:

```
await loop(...);
await loop(...);
```

Можно сделать обработку ошибок:

```
loop(() => main().catch((e) => {
  console.error(e);
  return false;
}));
```

# Пауза в цикле

Самый простой и правильный способ - задать паузу вторым аргументом:

```
loop(main, 1000)
```

Можно также добавлять задержки внутри кода исполняемой логики, например в функции main:

```
async function main(): Promise<boolean> {
  if (...) {
    return false;
  }

  await wait(1000);

  return true;
}
```

# Лицензия

Лицензия MIT, 2025
